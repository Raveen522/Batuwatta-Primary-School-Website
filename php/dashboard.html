<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset='UTF-8'>
    <meta name='viewport' content='width=device-width, initial-scale=1.0'>
    
    <title>Batuwatta Primary School</title>
    <link rel='icon' type='image/x-icon' href='../assets/images/icons/logo.png'>

    <link rel="stylesheet" href="../css/style.css">
    <link rel='stylesheet' href='../css/animations.css'>
    <link rel='stylesheet' href='../css/home.css'>
    <link rel='stylesheet' href='../css/responsive.css'>
    <link rel='stylesheet' href='../css/dashboard.css'>

</head>
<body onload="loaddata()">

        <!-- --------- Navigation bar --------- -->
        <div class="nav-bar">
        
            <div class="logo row">
                <a href="#">
                    <img class="logo" src="../assets/images/icons/logo.png">
                </a>
                <p>බටුවත්ත ප්‍රාථමික විද්‍යාලය - Content Management System</p>
            </div>
            
            <ul>
                <li><a href="../index.html" target="_blank">Home</a></li>
                <li><a href="../about.html" target="_blank">About</a></li>
                <li><a href="https://drive.google.com/drive/folders/1yVyBoLf9xa8T9fjSCx1aiw_CJVjHWmbZ?usp=sharing" target="_blank">Downloads</a></li>
                <!-- <li><a href="./news.html">News</a></li> -->
            </ul>
    
            <div class="menu-btn">
                <div class="menu-btn_burger"></div>
            </div>
    
    
        </div>
        <!-- --------- End of Navigation bar --------- -->



    <!-- Tab links -->
    <div class="tab">
        <button class="tablinks" onclick="openCity(event, 'General')" id="defaultOpen">General</button>
        <button class="tablinks" onclick="openCity(event, 'News')" >News</button>
        <button class="tablinks" onclick="openCity(event, 'Gallery')">Gallery</button>
        <button class="tablinks" onclick="openCity(event, 'Achievements')">Achievements</button>
    </div>
    
    <!-- Tab content -->

    <div id="General" class="tabcontent">
        <div style="width: 90%;
                    display: flex;
                    flex-direction: row;
                    flex-wrap: wrap;
                    justify-content: space-between;
                    align-items: center;">
            
            <h3>General</h3> 
            <button id="btn_general_save" onclick="save_generals()">Save Changes</button>
        </div>
        
        <hr>
            <div class="container col">
                <div class="general_settings" id="general_settings" style="width: 90%; ">
                    <form id = "frm_general" onsubmit="return false" enctype="multipart/form-data">

                        <table>
                            <thead>
                                <tr>
                                    <th>Content Name</th>
                                    <th>Content</th>
                                    <th>Visibility</th>
                                </tr>
                            </thead>

                            <tbody class="tb_content" id="tb_content">
                                <!-- <tr>
                                    <td>
                                        <label for="hero_title">Hero Title :</label>
                                    </td>
                                    <td>
                                        <input type="text" name="hero_title" id="hero_title"> 
                                    </td>
                                    <td>
                                        <div class="row">
                                            <input type="checkbox" name="hero_title_visibility" id="hero_title_visibility">
                                            <label for="hero_title_visibility">Show</label>
                                        </div>
                                    </td>
                                </tr>
                                
                                <tr>
                                    <td>
                                        <label for="hero_paragraph">Hero Paragraph :</label>
                                    </td>
                                    <td>
                                        <input type="text" name="hero_paragraph" id="hero_paragraph">
                                    </td>
                                    <td>
                                        <div class="row">
                                            <input type="checkbox" name="hero_paragraph_visibility" id="hero_paragraph_visibility">
                                            <label for="hero_paragraph_visibility">Show</label>
                                        </div>
                                    </td>
                                </tr>
    
                                <tr>
                                    <td>
                                        <label for="hero_button_txt">Hero Button Text :</label>
                                    </td>
                                    <td>
                                        <input type="text" name="hero_button_txt" id="hero_button_txt">
                                    </td>
                                    <td>
                                        <div class="row">
                                            <input type="checkbox" name="hero_button_visibility" id="hero_button_visibility">
                                            <label for="hero_button_visibility">Show</label>
                                        </div>
                                    </td>
                                </tr>
    
                                <tr>
                                    <td>
                                        <label for="hero_button_link">Hero Button Link :</label>
                                    </td>
                                    <td>
                                        <input type="text" name="hero_button_link" id="hero_button_link">
                                    </td>
                                    <td>
                                    </td>
                                </tr> -->
                            </tbody>
                        </table>
                    </form>
                </div>
            </div>
        
    </div>


    <div id="News" class="tabcontent">
        <div style="width: 90%;
                    display: flex;
                    flex-direction: row;
                    flex-wrap: wrap;
                    justify-content: space-between;
                    align-items: center;">
            
            <h3>News</h3> 
            <button id="btn_news_save" onclick="save_news()">Save Changes</button>
        </div>
        
        <hr>
            <div class="container col">

                <div class="news-list row col-mobile" id="news_list">
                    <!-- <div class="news-card col" id="news_card_1">
                        <form id = "frm_news_card_1" onsubmit="return false" enctype="multipart/form-data">

                            <input type="text" name="news_card_ID" id="news_card_ID" value="1"  >

                            <img src="../assets/images/news/news_1.JPG" alt="" class="news-img" id="news_img_1">

                            <input type="file" name="news_img_1_upload" id="news_img_1_upload" accept="image/*" class="input-file" onchange="document.getElementById('news_img_1').src = window.URL.createObjectURL(this.files[0])">
                            <label for="news_img_1_upload" class="input-file-label">Choose a image</label>
    
    
                            <input type="text" name="news_title" id="news_title" placeholder="News Title" value="">
    
                            <textarea name="news_description" id="news_description" cols="20" rows="3" placeholder="News description"></textarea>
                            
                            <div class="row">
                                <input type="checkbox" name="news_card_visibility" id="news_card_visibility"> <label for="news_card_visibility">Show</label>
                            </div>
                        </form>
                    </div> -->
                </div>
            </div>
        
    </div>
    
    <div id="Gallery" class="tabcontent">
        <div style="width: 90%;
            display: flex;
            flex-direction: row;
            flex-wrap: wrap;
            justify-content: space-between;
            align-items: center;">

            <h3>Gallery</h3> 
            <button id="btn_event_gallery_save" onclick="save_events()">Save Changes</button>
        </div>
        
        <hr>
            <div class="container col">

                <div class="event-gallery row" id="event_gallery_list">
                    <!-- <div class="event-gallery-item" id="event_gallery_item_01">
                        <form id = "frm_event_item_1" onsubmit="return false" enctype="multipart/form-data">
                            <input type="text" name="event_gallery_item_ID" id="event_gallery_item_ID" value="1">

                            <img src="../assets/images/events/event_01.JPG" alt="" id="event_img_1">
    
                            <input type="file" name="event_img_1_upload" id="event_img_1_upload" accept="image/*" class="input-file" onchange="document.getElementById('event_item_img_1').src = window.URL.createObjectURL(this.files[0])">
                            <label for="event_img_1_upload" class="input-file-label">Choose a image</label>
    
                            <div class="row">
                                <input type="checkbox" name="event_img_visibility" id="event_img_visibility"> <label for="event_img_visibility">Show</label>
                            </div>
                        </form>
                    </div> -->
                </div>
            </div>

    </div>
    
    <div id="Achievements" class="tabcontent">
        <div style="width: 90%;
            display: flex;
            flex-direction: row;
            flex-wrap: wrap;
            justify-content: space-between;
            align-items: center;">

            <h3>Achievements</h3> 
            <button id="btn_achievements_save" onclick="save_achievements()">Save Changes</button>
        </div>
        
        <hr>

            <div class="container col">
                <div class="achievements-list row" id="achievements_list">

                    <!-- <div class="achievements-item col" id="achievements_item_1">
                        <form id = "frm_achievements_card_1" onsubmit="return false" enctype="multipart/form-data">
                            
                            <input type="text" name="achievements_card_ID" id="achievements_card_ID" value="1">

                            <img src="../assets/images/achievements/achievements_1.JPG" alt="" id="achievements_item_img_1">

                            <input type="file" name="achievements_img_1_upload" id="achievements_img_1_upload" accept="image/*" class="input-file" onchange="document.getElementById('achievements_item_img_1').src = window.URL.createObjectURL(this.files[0])">
                            <label for="achievements_img_1_upload" class="input-file-label">Choose a image</label>


                            <input type="text" name="achievements-title" id="achievements_item_title" placeholder="Achievement Title">
    
                            <textarea name="achievements-description" id="achievements_description" cols="20" rows="3" placeholder="Achievement description"></textarea>
                            
                            <div class="row">
                                <input type="checkbox" name="achievements_item_visibility" id="achievements_item_visibility"> <label for="achievements_item_visibility">Show</label>
                            </div>
                        </form>
                    </div> -->

                </div>
            </div>

        
    </div>


    <script>
        document.getElementById("defaultOpen").click();
        function openCity(evt, cityName) {
        // Declare all variables
        var i, tabcontent, tablinks;

        // Get all elements with class="tabcontent" and hide them
        tabcontent = document.getElementsByClassName("tabcontent");
        for (i = 0; i < tabcontent.length; i++) {
            tabcontent[i].style.display = "none";
        }

        // Get all elements with class="tablinks" and remove the class "active"
        tablinks = document.getElementsByClassName("tablinks");
        for (i = 0; i < tablinks.length; i++) {
            tablinks[i].className = tablinks[i].className.replace(" active", "");
        }

        // Show the current tab, and add an "active" class to the button that opened the tab
        document.getElementById(cityName).style.display = "block";
        evt.currentTarget.className += " active";
        }


        function loaddata(){
            load_generals();
            load_news();
            load_achievements();
            load_events();
        }

        function load_generals(){
            var xmlhttp = new XMLHttpRequest();
            xmlhttp.onreadystatechange = function() {
                if (this.readyState == 4 && this.status == 200) {
                    document.getElementById("tb_content").innerHTML=this.responseText;
                }
            };

            xmlhttp.open("POST", "../php/load_generals.php", true);
            xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
            xmlhttp.send();
        }
        function save_generals(){

                var general_form = document.getElementById('frm_general');
                var general_formData = new FormData(general_form);
                    
                var xmlhttp = new XMLHttpRequest();
                xmlhttp.open('POST', '../php/update_generals.php', true);
                xmlhttp.onload = function() {
                    if (this.status === 200) {
                        // alert(this.responseText);
                        document.getElementById("tb_content").innerHTML=this.responseText;
                    }else{
                        // console.log(this.responseText);
                        document.getElementById("tb_content").innerHTML=this.responseText;
                    }
                };
                xmlhttp.send(general_formData);

        }

        function load_news(){
            var xmlhttp = new XMLHttpRequest();
            xmlhttp.onreadystatechange = function() {
                if (this.readyState == 4 && this.status == 200) {
                    document.getElementById("news_list").innerHTML=this.responseText;
                }
            };

            xmlhttp.open("POST", "../php/load_news.php", true);
            xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
            xmlhttp.send();
        }
        function save_news(){
            for (let news_ID = 1; news_ID < 5; news_ID++) {
                var news_form = document.getElementById('frm_news_card_'+news_ID);
                var news_formData = new FormData(news_form);
                    
                var xmlhttp = new XMLHttpRequest();
                xmlhttp.open('POST', '../php/update_news.php', true);
                xmlhttp.onload = function() {
                    if (this.status === 200) {
                        // alert(this.responseText);
                        document.getElementById("news_list").innerHTML=this.responseText;
                    }else{
                        // console.log(this.responseText);
                        document.getElementById("news_list").innerHTML=this.responseText;
                    }
                };
                xmlhttp.send(news_formData);
            }
        }

        function load_achievements(){
            var xmlhttp = new XMLHttpRequest();
            xmlhttp.onreadystatechange = function() {
                if (this.readyState == 4 && this.status == 200) {
                    document.getElementById("achievements_list").innerHTML=this.responseText;
                }
            };

            xmlhttp.open("POST", "../php/load_achievements.php", true);
            xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
            xmlhttp.send();
        }
        function save_achievements(){
            for (let achievements_ID = 1; achievements_ID < 5; achievements_ID++) {
                var achievements_form = document.getElementById('frm_achievements_card_'+achievements_ID);
                var achievements_formData = new FormData(achievements_form);
                    
                var xmlhttp = new XMLHttpRequest();
                xmlhttp.open('POST', '../php/update_achievements.php', true);
                xmlhttp.onload = function() {
                    if (this.status === 200) {
                        // alert(this.responseText);
                        document.getElementById("achievements_list").innerHTML=this.responseText;
                    }else{
                        // console.log(this.responseText);
                        document.getElementById("achievements_list").innerHTML=this.responseText;
                    }
                };
                xmlhttp.send(achievements_formData);
            }
        }

        function load_events(){
            var xmlhttp = new XMLHttpRequest();
            xmlhttp.onreadystatechange = function() {
                if (this.readyState == 4 && this.status == 200) {
                    document.getElementById("event_gallery_list").innerHTML=this.responseText;
                }
            };

            xmlhttp.open("POST", "../php/load_events.php", true);
            xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
            xmlhttp.send();
        }
        function save_events(){
            for (let events_ID = 1; events_ID < 2; events_ID++) {
                var events_form = document.getElementById('frm_event_item_'+events_ID);
                var events_formData = new FormData(events_form);
                    
                var xmlhttp = new XMLHttpRequest();
                xmlhttp.open('POST', '../php/update_events.php', true);
                xmlhttp.onload = function() {
                    if (this.status === 200) {
                        // alert(this.responseText);
                        document.getElementById("event_gallery_list").innerHTML=this.responseText;
                    }else{
                        // console.log(this.responseText);
                        document.getElementById("event_gallery_list").innerHTML=this.responseText;
                    }
                };
                xmlhttp.send(events_formData);
            }
            }




    </script>

</body>
</html>